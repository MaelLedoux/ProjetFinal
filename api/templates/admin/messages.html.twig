{% extends 'base.html.twig' %}
{% block title %}Messages reÃ§us{% endblock %}

{% block body %}
<div class="card">
  <h2 style="margin:0;">Messages</h2>
</div>

{% for message in messages %}
  <div class="card">
    <p><strong>Nom :</strong> {{ message.name }}</p>
    <p><strong>Email :</strong> <a href="mailto:{{ message.email }}">{{ message.email }}</a></p>
    <p><strong>Sujet :</strong> {{ message.sujet }}</p>
    <p><strong>TÃ©lÃ©phone :</strong> {{ message.telephone ?? 'Non renseignÃ©' }}</p>
    <p><strong>ReÃ§u le :</strong> {{ message.createdAt|date('d/m/Y H:i') }}</p>
    <p><strong>Message :</strong><br>{{ message.message|nl2br }}</p>

    {% if is_granted('ROLE_ADMIN') %}
      <form method="post" action="{{ path('admin_message_delete', { id: message.id }) }}" onsubmit="return confirm('Supprimer ce message ?')">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ message.id) }}">
        <button type="submit" class="btn ghost">ğŸ—‘ï¸ Supprimer</button>
      </form>
    {% endif %}
  </div>
{% else %}
  <div class="card"><em class="muted">Aucun message reÃ§u.</em></div>
{% endfor %}
{% endblock %}
